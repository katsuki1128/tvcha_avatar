<!-- avatar.html -->
<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport"
        content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">

    <!-- CSS & Tailwind -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/reset.css') }}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
    <script src="https://cdn.tailwindcss.com"></script>

    <title>ã‚¢ãƒã‚¿ãƒ¼ç”Ÿæˆ</title>
</head>

<body>
    <section id="header" class="bg-gray-200"></section>
    <section id="camera" class="bg-gray-200">
        <!-- ã‚«ãƒ¡ãƒ©ãƒœã‚¿ãƒ³ã®è¿½åŠ  -->
        <button id="cameraButton">ã‚«ãƒ¡ãƒ©ã‚’èµ·å‹•</button>
        <!-- ã‚«ãƒ¡ãƒ©åœæ­¢ãƒœã‚¿ãƒ³ã®è¿½åŠ  -->
        <button id="stopCameraButton">ã‚«ãƒ¡ãƒ©ã‚’åœæ­¢</button>
        <!-- æ’®å½±ãƒœã‚¿ãƒ³ã®è¿½åŠ  -->
        <button id="captureButton">æ’®å½±</button>
        <!-- ä¿å­˜ãƒœã‚¿ãƒ³ã®è¿½åŠ  -->
        <button id="saveButton" style="display:none;">ä¿å­˜</button>
        <!-- ãƒ“ãƒ‡ã‚ªè¦ç´ ã®è¿½åŠ  -->
        <video id="cameraStream" width="640" height="480" autoplay style="display:none;"></video>
        <!-- æ’®å½±ã—ãŸç”»åƒã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã®è¦ç´  -->
        <img id="yourImageElementId" src="" alt="Generated Image" style="display: none;">
        <img id="capturedImage" style="display:none;">

        <!-- <img src="{{ url_for('static', filename=image_path) }}" alt="Generated Image"> -->

    </section>

    <section id="stampWrapper"></section>
    <section id="stampCountWrapper" class="bg-gray-200"></section>

    <script src="{{ url_for('static', filename='js/avatar.js') }}"></script>

    <script type="module">
        //------------------------------------------
        // â–¼firebaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨javaScriptã‚’é€£æºã•ã›ã‚‹
        //------------------------------------------

        // å¿…è¦ãªæ©Ÿèƒ½ã‚’SDKã‹ã‚‰ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";

        // firebase firestoreã¨ã‚„ã‚Šå–ã‚Šã‚’ã™ã‚‹è¨­å®š
        import {
            getFirestore,
            collection,
            addDoc,
            serverTimestamp,
            query,
            orderBy, //ãƒ‡ãƒ¼ã‚¿ã®ã‚½ãƒ¼ãƒˆ
            onSnapshot, // Firestore ä¸Šã«ä¿å­˜ã•ã‚Œã¦ã„ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
            doc,
            deleteDoc,
            updateDoc,
            getDocs,
            getDoc,
            increment,
        } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js";

        // firebase storageã¨ã‚„ã‚Šå–ã‚Šã‚’ã™ã‚‹è¨­å®š
        import {
            getStorage,
            ref,
            uploadBytes,
            getDownloadURL,
        } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-storage.js";

        // ã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªã®Firebaseã®è¨­å®š
        const firebaseConfig = {
            apiKey: "AIzaSyBs-rcINsUSZe7bD7OeLTrNcXm6-OInABg",
            authDomain: "tvcha-9cae7.firebaseapp.com",
            projectId: "tvcha-9cae7",
            storageBucket: "tvcha-9cae7.appspot.com",
            messagingSenderId: "866848033597",
            appId: "1:866848033597:web:c6887382eb14ee58351354",
        };

        // Firebaseã®åˆæœŸåŒ–
        const app = initializeApp(firebaseConfig);

        // Firebaseã‚¢ãƒ—ãƒªã¨Cloud Storageã®é€£æºã‚’åˆæœŸåŒ–ã—ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã™ã‚‹
        const storage = getStorage(app);

        // dbã«å¯¾ã—ã¦ãƒ‡ãƒ¼ã‚¿ã®è¿½åŠ ã‚„å–å¾—ãŒã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹
        const db = getFirestore(app);

        // ã‚«ãƒ¡ãƒ©ãƒœã‚¿ãƒ³ã®è¦ç´ ã‚’å–å¾—
        const cameraButton = document.getElementById('cameraButton');
        const stopCameraButton = document.getElementById('stopCameraButton');
        const captureButton = document.getElementById('captureButton');
        const saveButton = document.getElementById('saveButton');
        const cameraStream = document.getElementById('cameraStream');
        const capturedImage = document.getElementById('capturedImage');
        let stream = null;


        // ã‚«ãƒ¡ãƒ©ã‚’èµ·å‹•ã™ã‚‹é–¢æ•°
        const startCamera = () => {
            navigator.mediaDevices.getUserMedia({ video: true })
                .then((mediaStream) => {
                    stream = mediaStream;
                    cameraStream.srcObject = mediaStream;
                    cameraStream.play();

                    // ã“ã“ã«ã‚«ãƒ¡ãƒ©ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’å‡¦ç†ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’è¿½åŠ 
                    // console.log("ã‚«ãƒ¡ãƒ©ãŒèµ·å‹•ã—ã¾ã—ãŸ");
                })
                .catch((error) => {
                    console.error("ã‚«ãƒ¡ãƒ©ã®èµ·å‹•ã«å¤±æ•—ã—ã¾ã—ãŸ:", error);
                });
        }
        const stopCamera = () => {
            if (stream) {
                stream.getTracks().forEach(track => track.stop());
                cameraStream.srcObject = null;
            }
        }
        const captureImage = () => {
            // ã‚«ãƒ¡ãƒ©ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‹ã‚‰ã®ç”»åƒã‚’ã‚­ãƒ£ãƒ³ãƒã‚¹ã«æç”»
            const canvas = document.createElement('canvas');
            canvas.width = cameraStream.videoWidth;
            canvas.height = cameraStream.videoHeight;
            canvas.getContext('2d').drawImage(cameraStream, 0, 0, canvas.width, canvas.height);

            // ã‚­ãƒ£ãƒ³ãƒã‚¹ã‹ã‚‰ã®ç”»åƒã‚’capturedImageã«è¨­å®š
            capturedImage.src = canvas.toDataURL('image/png');
            capturedImage.style.display = 'block';
            saveButton.style.display = 'block';
        }

        const saveImage = () => {
            // ç¾åœ¨ã®ã‚«ãƒ¡ãƒ©ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’å–å¾—
            const stream = cameraStream.srcObject;

            // ã‚«ãƒ¡ãƒ©ã‚¹ãƒˆãƒªãƒ¼ãƒ ã®å„ãƒˆãƒ©ãƒƒã‚¯ã‚’åœæ­¢
            if (stream) {
                const tracks = stream.getTracks();
                tracks.forEach(track => track.stop());
            }

            // ãƒ“ãƒ‡ã‚ªè¦ç´ ã‚’éè¡¨ç¤ºã«è¨­å®š
            cameraStream.style.display = 'none';

            // canvasè¦ç´ ã‚’ä½œæˆã—ã¦ã€ãƒ“ãƒ‡ã‚ªã®ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’æç”»
            // const canvas = document.createElement('canvas');
            // canvas.width = cameraStream.videoWidth;
            // canvas.height = cameraStream.videoHeight;
            // canvas.getContext('2d').drawImage(cameraStream, 0, 0, canvas.width, canvas.height);

            // æç”»ã—ãŸç”»åƒã‚’ä¿å­˜
            // canvas.toBlob((blob) => {
            //     const formData = new FormData();
            //     formData.append('image', blob, 'image.png');

            //     fetch('/upload', {
            //         method: 'POST',
            //         body: formData
            //     })
            //         .then(response => response.json()) // JSONãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’æœŸå¾…
            //         .then(data => {

            //             // ç”Ÿæˆã•ã‚ŒãŸç”»åƒã®ãƒ‘ã‚¹ã‚’å–å¾—
            //             const imagePath = data.image_path;

            //             // ç”Ÿæˆã•ã‚ŒãŸç”»åƒã‚’è¡¨ç¤º
            //             const imageElement = document.getElementById('generatedImage');
            //             imageElement.src = '/static/' + imagePath;
            //             imageElement.style.display = 'block';
            //         })

            //     // .then(response => response.text())
            //     // .then(data => {
            //     //     console.log(data);
            //     // })
            //     // .catch(error => {
            //     //     console.error('Error:', error);
            //     // });
            // }, 'image/png');
        }

        // ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ç”»åƒã®ãƒ‘ã‚¹ã‚’å–å¾—ã—ã¦ã‚­ãƒ£ãƒ³ãƒã‚¹ã«æç”»ã™ã‚‹é–¢æ•°
        // const loadImageToCanvas = (imagePath) => {
        //     const canvas = document.createElement('canvas');
        //     const ctx = canvas.getContext('2d');
        //     const image = new Image();

        //     image.onload = () => {
        //         canvas.width = image.width;
        //         canvas.height = image.height;
        //         ctx.drawImage(image, 0, 0);
        //         // ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚’DOMã«è¿½åŠ ã™ã‚‹ã‹ã€æ—¢å­˜ã®ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚’ç½®ãæ›ãˆã‚‹
        //         document.body.appendChild(canvas); // ä¾‹ï¼šbodyã«è¿½åŠ 
        //     };

        //     // ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ã®ç”»åƒãƒ‘ã‚¹ã‚’è¨­å®š
        //     image.src = imagePath;
        // };

        document.addEventListener('DOMContentLoaded', (event) => {
            const cameraButton = document.getElementById('cameraButton');
            const stopCameraButton = document.getElementById('stopCameraButton');
            const captureButton = document.getElementById('captureButton');
            const saveButton = document.getElementById('saveButton');
            const cameraStream = document.getElementById('cameraStream');

            // ã‚«ãƒ¡ãƒ©ã‚’èµ·å‹•ã™ã‚‹ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
            cameraButton.addEventListener('click', () => {
                startCamera(); // ã‚«ãƒ¡ãƒ©ã‚’èµ·å‹•ã™ã‚‹é–¢æ•°ã‚’å‘¼ã³å‡ºã—
                cameraStream.style.display = 'block'; // ãƒ“ãƒ‡ã‚ªè¦ç´ ã‚’è¡¨ç¤º
            });

            // ã‚«ãƒ¡ãƒ©ã‚’åœæ­¢ã™ã‚‹ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
            stopCameraButton.addEventListener('click', stopCamera); // ã‚«ãƒ¡ãƒ©ã‚’åœæ­¢ã™ã‚‹é–¢æ•°ã‚’å‘¼ã³å‡ºã—

            // æ’®å½±ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
            captureButton.addEventListener('click', captureImage); // ç”»åƒã‚’æ’®å½±ã™ã‚‹é–¢æ•°ã‚’å‘¼ã³å‡ºã—

            // ç”»åƒã‚’ä¿å­˜ã™ã‚‹ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
            // saveButton.addEventListener('click', saveImage); // ç”»åƒã‚’ä¿å­˜ã™ã‚‹é–¢æ•°ã‚’å‘¼ã³å‡ºã—
        });


        // OpenAI APIã‚’ä½¿ç”¨ã—ã¦ç”»åƒã‚’ç”Ÿæˆã™ã‚‹é–¢æ•°
        // const generateImage = (data) => {
        //     console.log("ç”»åƒç”Ÿæˆé–‹å§‹"); // å‡¦ç†é–‹å§‹ã‚’ãƒ­ã‚°ã«è¨˜éŒ²
        //     return fetch('https://api.openai.com/v1/images/generations', {
        //         method: 'POST',
        //         headers: {
        //             'Content-Type': 'application/json',
        //             'Authorization': `Bearer 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`
        //         },

        //         body: JSON.stringify({
        //             prompt: `èª‡å¼µã•ã‚ŒãŸã€é™½æ°—ãªè¡¨æƒ…ã‚’ã—ãŸäººç‰©ã®ã‚¤ãƒ©ã‚¹ãƒˆã‚’LINEã‚¹ã‚¿ãƒ³ãƒ—ã‚¹ã‚¿ã‚¤ãƒ«ã§ä½œæˆã€‚ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã¯${data}ã§ã€ä½“ãŒå°ã•ã„ã“ã¨ã§ã‚«ãƒ¼ãƒˆã‚¥ãƒ¼ãƒ³ã®ã‚ˆã†ãªå´é¢ã‚’å¼·èª¿ã€‚é¡”ã®ç‰¹å¾´ã¯ã€å¤§èƒ†ãªç·šã¨æ˜ã‚‹ã„è‰²ã§ç°¡ç•¥åŒ–ã•ã‚Œã€ã‚¹ã‚¿ã‚¤ãƒªãƒƒã‚·ãƒ¥ã«è¡¨ç¾ã•ã‚Œã‚‹ã€‚èƒŒæ™¯ã¯ã‚·ãƒ³ãƒ—ãƒ«ã§ã‚¯ãƒªãƒ¼ãƒ³ã€‚`,
        //             size: "1024x1024"
        //         }),

        //     })
        //         .then(response => response.json())
        //         .then(responseData => {
        //             if (responseData && responseData.data && responseData.data.length > 0) {
        //                 const imageUrl = responseData.data[0].url;
        //                 console.log("ç”Ÿæˆã•ã‚ŒãŸç”»åƒã®URL:", imageUrl);
        //                 return imageUrl;
        //             } else {
        //                 throw new Error('ç”»åƒç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸã€‚');
        //             }
        //         })
        //         .catch(error => {
        //             console.error("ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ:", error); // ã‚¨ãƒ©ãƒ¼ã‚’ãƒ­ã‚°ã«è¨˜éŒ²
        //         });
        // };

        // ç”»åƒã‚’HTMLã«è¡¨ç¤ºã™ã‚‹é–¢æ•°
        // const displayImage = (imageUrl) => {
        //     const imageElement = document.createElement('img');
        //     imageElement.src = imageUrl;
        //     document.body.appendChild(imageElement);
        // };

        const uploadImageAndSaveData = (imageBlob) => {

            // ãƒ“ãƒ‡ã‚ªè¦ç´ ã‚’éè¡¨ç¤ºã«è¨­å®š
            cameraStream.style.display = 'none';

            const storageRef = ref(storage, `images/${new Date().getTime()}.png`);

            uploadBytes(storageRef, imageBlob)
                .then(snapshot => getDownloadURL(snapshot.ref))
                .then(downloadURL => {
                    console.log("ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ URL:", downloadURL);

                    // ã“ã“ã§Flaskã‚µãƒ¼ãƒãƒ¼ã«downloadURLã‚’é€ä¿¡ã—ã¦è§£æçµæœã‚’å—ã‘å–ã‚‹
                    return fetch('/analyze-image', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({ image_url: downloadURL })
                    });
                })
                .then(response => response.json())
                .then(data => {
                    console.log('è§£æçµæœ:', data);

                    const prompt = `èª‡å¼µã•ã‚ŒãŸã€é™½æ°—ãªè¡¨æƒ…ã‚’ã—ãŸäººç‰©ã®ã‚¤ãƒ©ã‚¹ãƒˆã‚’LINEã‚¹ã‚¿ãƒ³ãƒ—ã‚¹ã‚¿ã‚¤ãƒ«ã§ä½œæˆã€‚ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®ç‰¹å¾´:  ${data}ã€‚ä½“ãŒå°ã•ã„ã“ã¨ã§ã‚«ãƒ¼ãƒˆã‚¥ãƒ¼ãƒ³ã®ã‚ˆã†ãªå´é¢ã‚’å¼·èª¿ã€‚é¡”ã®ç‰¹å¾´ã¯ã€å¤§èƒ†ãªç·šã¨æ˜ã‚‹ã„è‰²ã§ç°¡ç•¥åŒ–ã•ã‚Œã€ã‚¹ã‚¿ã‚¤ãƒªãƒƒã‚·ãƒ¥ã«è¡¨ç¾ã•ã‚Œã‚‹ã€‚èƒŒæ™¯ã¯ç™½è‰²ã«ã€‚`;
                    console.log(prompt);
                    // è§£æçµæœã‚’åŸºã«æ–°ã—ã„ç”»åƒã‚’ç”Ÿæˆã™ã‚‹ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡

                    return fetch('/generate-image', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({ prompt: prompt })  // è§£æçµæœã«åŸºã¥ããƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
                    });
                    console.log("test")

                })
                .then(response => response.json())  // ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’JSONã¨ã—ã¦è§£æ
                .then(data => {

                    // captureImageã§ç”Ÿæˆã•ã‚ŒãŸç”»åƒã‚’éè¡¨ç¤ºã«ã™ã‚‹
                    // capturedImage.style.display = 'none';

                    // ç”Ÿæˆã•ã‚ŒãŸç”»åƒã®ãƒ‘ã‚¹ã‚’å–å¾—
                    const imagePath = data.image_path;
                    console.log('ç”»åƒãƒ‘ã‚¹:', data.image_path);

                    // HTMLå†…ã®imgè¦ç´ ã‚’å–å¾—
                    const imageElement = document.getElementById('yourImageElementId');

                    // imgè¦ç´ ã®srcå±æ€§ã‚’æ›´æ–°ã—ã¦ç”»åƒã‚’è¡¨ç¤º
                    imageElement.src = '/static/' + imagePath;
                    imageElement.style.display = 'block';
                })
                .catch(error => {
                    console.error('ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ:', error);
                });
        };

        document.getElementById('saveButton').addEventListener('click', () => {
            const canvas = document.createElement('canvas');
            const cameraStream = document.getElementById('cameraStream');
            canvas.width = cameraStream.videoWidth;
            canvas.height = cameraStream.videoHeight;
            canvas.getContext('2d').drawImage(cameraStream, 0, 0, canvas.width, canvas.height);

            canvas.toBlob(uploadImageAndSaveData, 'image/png');
        });

        // const imageElement = document.createElement('img');
        // imageElement.id = 'yourImageElementId';
        // imageElement.src = ''; // åˆæœŸçŠ¶æ…‹ã§ã¯srcã¯ç©º
        // imageElement.alt = 'Generated Image';
        // imageElement.style.display = 'none'; // åˆæœŸçŠ¶æ…‹ã§ã¯éè¡¨ç¤º

        // ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã®åå‰ã‚’å®šç¾©
        // const collectionName = "tvcha";
        // const collectionUsernName = "tvcha-user";
        // const collectionJudgeName = "uretoru_judge";

        // ğŸ”½ ãƒ‡ãƒ¼ã‚¿å–å¾—æ¡ä»¶ã®æŒ‡å®šï¼ˆä»Šå›ã¯orderé †ã«ä¸¦ã³æ›¿ãˆã¦å–å¾—ï¼‰
        // const q = query(collection(db, collectionName), orderBy("order", "desc"));

        // ğŸ”½ ãƒ‡ãƒ¼ã‚¿å–å¾—æ¡ä»¶ã®æŒ‡å®š
        // const user_q = query(collection(db, collectionUsernName));

        // ğŸ”½ ãƒ‡ãƒ¼ã‚¿å–å¾—æ¡ä»¶ã®æŒ‡å®š
        // const judge_q = query(collection(db, collectionJudgeName));

        // ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã¨Firestoreã¸ã®ãƒ‡ãƒ¼ã‚¿ä¿å­˜ã®é–¢æ•°
        // const uploadImageAndSaveData = () => {
        //     console.log("test");
        //     const imgFile = document.getElementById('img').files[0];
        //     if (!imgFile) {
        //         console.log('ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ãŒé¸æŠã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚');
        //         return;
        //     }

        //     const storageRef = ref(storage, `images/${imgFile.name}`);
        //     uploadBytes(storageRef, imgFile)
        //         .then(snapshot => getDownloadURL(snapshot.ref))
        //         .then(downloadURL => {
        //             console.log("ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ URL:", downloadURL);

        //             // const postData = {
        //             //     img: downloadURL,
        //             //     point: Number(document.getElementById('point').value),
        //             //     count: Number(document.getElementById('count').value),
        //             //     order: 1, // ã“ã“ã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•°ã«åŸºã¥ã„ã¦è¨­å®šã™ã‚‹
        //             //     time: serverTimestamp(),
        //             // };

        //             // return addDoc(collection(db, "tvcha"), postData);
        //         })
        //         .then(() => {
        //             console.log("ãƒ‡ãƒ¼ã‚¿ã‚’ Firestore ã«ä¿å­˜ã—ã¾ã—ãŸ");
        //             // document.getElementById('img').value = '';
        //             // document.getElementById('point').value = '';
        //             // document.getElementById('count').value = '';
        //             // document.getElementById('send').disabled = true;
        //         })
        //         .catch(error => {
        //             console.error("ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ:", error);
        //         });
        // };

        // // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®è¨­å®š
        // document.getElementById('saveButton').addEventListener('click', uploadImageAndSaveData);


    </script>

</body>

</html>